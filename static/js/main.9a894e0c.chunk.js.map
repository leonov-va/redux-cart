{"version":3,"sources":["store/constants/products.js","store/actions/products.js","components/Products/index.js","components/Basket/index.js","App.js","store/reducers/products.js","store/reducers/index.js","store/index.js","index.js"],"names":["ADD_PRODUCT","REMOVE_PRODUCT","addProduct","payload","type","constants","removeProduct","Products","props","onRemove","bind","onAdd","event","id","target","dataset","this","products","find","product","count","className","map","name","price","onClick","React","Component","connect","store","items","actions","Basket","useSelector","filter","reduce","a","b","App","initialState","combineReducers","state","action","constans","item","createStore","reducers","applyMiddleware","next","console","log","getState","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9a894e0c.chunk.js","sourcesContent":["export const ADD_PRODUCT = \"Добавить продукт\";\nexport const REMOVE_PRODUCT = \"Убрать продукт\";","import * as constants from \"../constants/products\";\n\nexport const addProduct = (payload) => ({\n  type: constants.ADD_PRODUCT,\n  payload,\n});\n\nexport const removeProduct = (payload) => ({\n  type: constants.REMOVE_PRODUCT,\n  payload,\n});\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../store/actions/products\";\nimport \"./index.css\";\n\nclass Products extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onRemove = this.onRemove.bind(this);\n    this.onAdd = this.onAdd.bind(this);\n  }\n\n  onRemove(event) {\n    const { id } = event.target.dataset;\n    const product = this.props.products.find((product) => product.id === id);\n\n    if (product.count >= 1) {\n      this.props.removeProduct({ id });\n    }\n  }\n\n  onAdd(event) {\n    const { id } = event.target.dataset;\n    this.props.addProduct({ id });\n  }\n\n  render() {\n    return (\n      <div className=\"products\">\n        <h1>Продукты</h1>\n        {this.props.products.map((product) => (\n          <div className=\"product\" key={product.name}>\n            <div className=\"product__name\">\n              {product.name} - ${product.price}\n            </div>\n            <div className=\"product__buttons-wrapper\">\n              <button data-id={product.id} onClick={this.onRemove}>\n                -\n              </button>\n              <div>\n                <span>{product.count || \"\"}</span>\n              </div>\n              <button data-id={product.id} onClick={this.onAdd}>\n                +\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n\n// Первым параметром вызывается функция, которая должна вернуть объект состояния.\n// Каждое свойство объекта состояния будет доступно через this.props.\n// Поэтому в примере выше на 32 строке мы получаем доступ к продуктам с помощью this.props.products.\n// -\n// Вторым параметром передаются объект экшенов.\n// Каждый из этих экшенов будет обернут в функцию dispatch.\n// Поэтому в примере выше на 25 строке мы просто вызыва ем Action creator без оборачивания в dispatch.\nexport default connect((store) => {\n  return {\n    products: store.products.items,\n  };\n}, actions)(Products);\n","import { useSelector } from \"react-redux\";\nimport \"./index.css\";\n\nexport default function Basket() {\n  const products = useSelector((store) => store.products.items);\n  const price = products\n    .filter((product) => !!product.count)\n    .map((product) => product.price * product.count)\n    .reduce((a, b) => a + b, 0);\n\n  return price ? (\n    <button className=\"basket\">Перейти к оплате (${price})</button>\n  ) : null;\n}\n","import Products from \"./components/Products\";\nimport Basket from \"./components/Basket\";\nimport \"./App.css\";\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <Products />\n      <Basket />\n    </div>\n  );\n}\n\nexport default App;\n","import * as constans from \"../constants/products\";\n\nconst initialState = {\n  items: [\n    { id: \"#1\", name: \"iPad 4 Mini\", price: 500, count: 0 },\n    { id: \"#2\", name: \"H&M T-Shirt White\", price: 10, count: 0 },\n    { id: \"#3\", name: \"Charli XCX - Sucker CD\", price: 699, count: 0 },\n  ],\n};\n\nexport default function productReducer(state = initialState, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case constans.ADD_PRODUCT:\n      return {\n        ...state,\n        items: state.items.map((item) => {\n          if (item.id === payload.id) {\n            return {\n              ...item,\n              count: item.count + 1,\n            };\n          }\n\n          return item;\n        }),\n      };\n    case constans.REMOVE_PRODUCT:\n      return {\n        ...state,\n        items: state.items.map((item) => {\n          if (item.id === payload.id) {\n            return {\n              ...item,\n              count: item.count - 1,\n            };\n          }\n\n          return item;\n        }),\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\nimport productReducer from \"./products\";\n\nexport default combineReducers({\n  products: productReducer,\n});\n\n// Example implements combine function\n// function combineReducers(reducers) {\n//   const initialStore = {};\n//   const keys = Object.keys(reducers);\n\n//   return (store = initialStore, action) => {\n//     Object.values(reducers).forEach((reducer, i) => {\n//       initialStore[keys[i]] = reducer(initialStore[keys[i]] || {}, action);\n//     });\n\n//     return initialStore;\n//   };\n// }\n","import { applyMiddleware, createStore } from \"redux\";\nimport reducers from \"./reducers\";\n\nconst logger = (store) => (next) => (action) => {\n  console.log(\"Предыдущее состояние\", store.getState());\n  console.log(\"Экшен\", action.type);\n  next(action);\n  console.log(\"Новое состояние\", store.getState());\n};\n\nexport default createStore(reducers, applyMiddleware(logger));\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport App from \"./App\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}